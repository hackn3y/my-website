<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ryan Hackney - ECE Graduate from Ohio State, Cybersecurity Professional, Developer. Shop handmade farm products including raw honey, soy candles, and handmade soap. Follow my Camaro build and technical projects.">
    <meta name="keywords" content="Ryan Hackney, Cybersecurity, ECE, Ohio State, Web Developer, Raw Honey, Handmade Soap, Camaro Build">
    <meta name="author" content="Ryan Hackney">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ryanhackney.com/">
    <meta property="og:title" content="Ryan Hackney - Portfolio & Shop">
    <meta property="og:description" content="ECE Grad • Cybersecurity • Developer • Farmer. Shop handmade products and follow my technical projects.">
    <meta property="og:image" content="https://ryanhackney.com/profile.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://ryanhackney.com/">
    <meta property="twitter:title" content="Ryan Hackney - Portfolio & Shop">
    <meta property="twitter:description" content="ECE Grad • Cybersecurity • Developer • Farmer. Shop handmade products and follow my technical projects.">
    <meta property="twitter:image" content="https://ryanhackney.com/profile.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Ryan Hackney" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#ff6b35">
    
    <title>Ryan Hackney - Portfolio & Shop</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K468SLPJ33"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-K468SLPJ33');
    </script>

    <script src="https://js.stripe.com/v3/"></script>
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --accent-primary: #ff6b35;
            --accent-secondary: #ff8c42;
            --accent-hover: #ff4500;
            --border-color: #333;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        body.light-mode {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #1a1a1a;
            --text-secondary: #555555;
            --accent-primary: #ff6b35;
            --accent-secondary: #ff8c42;
            --accent-hover: #ff4500;
            --border-color: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            transition: background 0.3s ease, color 0.3s ease;
        }

        #site-header-placeholder {
            display: none;
        }

        /* Theme toggle: inline icon inside nav controls (not floating) */
        .theme-toggle {
            background: transparent;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.05rem;
            padding: 0.2rem 0.45rem;
            border-radius: 6px;
            transition: color 0.2s, transform 0.12s;
        }

        .theme-toggle:hover {
            color: var(--accent-primary);
            transform: translateY(-2px);
        }

        nav {
            background: var(--bg-secondary);
            padding: 0.5rem 5%;
            box-shadow: 0 2px 10px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
        }

        /* nav inner wrapper to center links while allowing right-aligned controls */
        .nav-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-center {
            display: flex;
            justify-content: center;
            flex: 1 1 auto;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            flex: 0 0 auto;
        }

        /* Control group visual: subtle background and rounded border to group toggle + cart */
        .control-group {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.04);
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            backdrop-filter: blur(4px);
        }

        /* Hide control-group styling on mobile */
        @media (max-width: 768px) {
            .control-group {
                background: transparent !important;
                border: none !important;
                padding: 0 !important;
                backdrop-filter: none !important;
            }
        }

        /* Hamburger menu button */
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 4px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .hamburger-line {
            width: 24px;
            height: 2px;
            background: var(--text-primary);
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .hamburger.active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger.active .hamburger-line:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        .cart-btn {
            background: transparent;
            border: none;
            color: var(--text-primary);
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.2rem;
            cursor: pointer;
            font-size: 0.95rem;
        }

        /* Small circular badge shown on the cart icon when items are in the cart */
        .cart-badge {
            position: relative;
        }

        .cart-badge .badge {
            position: absolute;
            top: -6px;
            right: -8px;
            min-width: 18px;
            height: 18px;
            padding: 0 5px;
            background: var(--accent-primary);
            color: white;
            border-radius: 999px;
            font-size: 11px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.25);
        }

        .cart-btn:hover,
        .theme-toggle:hover {
            color: var(--accent-primary);
        }

        /* Screen-reader-only helper to keep labels accessible but visually hidden */
        .sr-only {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            align-items: center;
        }
        /* Nav link colors: default orange, visited a distinct warm variant */
        :root {
            --nav-link-color: var(--accent-primary); /* orange */
            --nav-link-visited: #c85a00; /* darker warm orange (not purple) */
        }

        nav a {
            color: var(--nav-link-color);
            position: relative;
            text-decoration: none;
            transition: color 0.2s;
        }

        nav a:hover {
            color: var(--accent-hover);
        }

        nav a:visited {
            color: var(--nav-link-visited);
        }

        .hero {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: white;
            padding: 6rem 5%;
            text-align: center;
            border-bottom: 3px solid var(--accent-primary);
        }

        body.light-mode .hero {
            background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%);
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 2rem;
            background: var(--accent-primary);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 600;
            transition: all 0.3s;
            border: 2px solid var(--accent-primary);
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 4rem 5%;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: var(--text-primary);
            position: relative;
            padding-bottom: 1rem;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--accent-primary);
        }

        #about {
            background: var(--bg-secondary);
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .about-content img {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 2rem;
            border: 4px solid var(--accent-primary);
            box-shadow: 0 5px 20px var(--shadow);
        }

        .about-content p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .about-content strong {
            color: var(--accent-primary);
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .skill-card {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px var(--shadow);
            text-align: center;
            border: 1px solid var(--border-color);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .skill-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow);
            border-color: var(--accent-primary);
        }

        .skill-card h3 {
            color: var(--accent-primary);
            margin-bottom: 1rem;
        }

        .skill-card ul {
            list-style: none;
            text-align: left;
        }

        .skill-card li {
            padding: 0.5rem 0;
            color: var(--text-secondary);
        }

        .skill-card li:before {
            content: "▹ ";
            color: var(--accent-primary);
            font-weight: bold;
        }

        #projects {
            background: var(--bg-secondary);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .project-card {
            background: var(--bg-primary);
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 6px var(--shadow);
            transition: transform 0.3s;
            border: 1px solid var(--border-color);
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .project-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-primary);
        }

        .project-card h3 {
            color: var(--accent-primary);
            margin-bottom: 1rem;
        }

        .project-card p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tag {
            background: var(--accent-primary);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .project-link {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 600;
            margin-top: 1rem;
            display: inline-block;
        }

        .project-link:hover {
            text-decoration: underline;
            text-decoration-color: #c85a00;
        }

        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .blog-card {
            background: var(--bg-secondary);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px var(--shadow);
            transition: transform 0.3s;
            border: 1px solid var(--border-color);
        }

        .blog-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-primary);
        }

        .blog-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .blog-card-content {
            padding: 1.5rem;
        }

        .blog-card h3 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .blog-card .date {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .blog-card p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .read-more {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 600;
        }

        .blog-card a {
            text-decoration: none;
            color: inherit;
        }

        .blog-card a:hover .read-more {
            text-decoration: underline;
            text-decoration-color: #c85a00;
        }

        #shop {
            background: var(--bg-secondary);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background: var(--bg-primary);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px var(--shadow);
            transition: transform 0.3s;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-primary);
        }

        .product-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-info h3 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .product-info p {
            color: var(--text-secondary);
        }

        .price {
            font-size: 1.5rem;
            color: var(--accent-primary);
            font-weight: 700;
            margin: 1rem 0;
        }

        .buy-now {
            width: 100%;
            padding: 0.8rem;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .buy-now:hover {
            background: var(--accent-hover);
        }

        .buy-now:disabled {
            background: #666;
            cursor: not-allowed;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1rem;
            font-family: inherit;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 150px;
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: var(--accent-hover);
        }

        footer {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-align: center;
            padding: 2rem 5%;
            border-top: 1px solid var(--border-color);
        }

        .social-links {
            margin-top: 1rem;
        }

        .social-links a {
            color: var(--text-primary);
            text-decoration: none;
            margin: 0 1rem;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: var(--accent-primary);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-primary);
            padding: 2rem;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            margin: 0;
            color: var(--text-primary);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .close-modal:hover {
            color: var(--accent-primary);
        }

        .checkout-form {
            margin-top: 1rem;
        }

        .checkout-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .checkout-total {
            font-size: 1.3rem;
            font-weight: 700;
            margin-top: 1rem;
            text-align: right;
            color: var(--accent-primary);
        }

        /* Newsletter Section */
        #newsletter {
            background: var(--bg-secondary);
            border-top: 2px solid var(--accent-primary);
            border-bottom: 2px solid var(--accent-primary);
        }

        .newsletter-content {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }

        .newsletter-content h2 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .newsletter-content p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .newsletter-form {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .newsletter-form input {
            flex: 1;
            min-width: 250px;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .newsletter-form button {
            padding: 0.8rem 2rem;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .newsletter-form button:hover {
            background: var(--accent-hover);
        }

        .product-card {
            cursor: pointer;
        }

        .quick-view-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .quick-view-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
        }

        .quick-view-info h2 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .quick-view-info p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .quick-view-price {
            font-size: 2rem;
            color: var(--accent-primary);
            font-weight: 700;
            margin: 1.5rem 0;
        }

        @media (max-width: 768px) {
            .quick-view-content {
                grid-template-columns: 1fr;
            }

            .quick-view-image {
                height: 300px;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-center {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: transparent;
                border-bottom: none;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease, background 0.3s ease;
                z-index: 1000;
            }

            .nav-center.active {
                max-height: 500px;
                overflow-y: auto;
                background: var(--bg-secondary);
                border-bottom: 1px solid var(--border-color);
            }

            .nav-center ul {
                flex-direction: column;
                gap: 0;
                padding: 0;
            }

            .nav-center ul li {
                border-bottom: 1px solid var(--border-color);
            }

            .nav-center ul li a {
                display: block;
                padding: 1rem 5%;
                font-size: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .theme-toggle {
                top: 0.5rem;
                right: 0.5rem;
                padding: 0.3rem;
                font-size: 1rem;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                justify-content: center;
            }

            /* Hide text on small screens */
            #theme-text {
                display: none;
            }
        }

        /* product card focus/hover affordances for accessibility */
        .product-card:hover,
        .product-card:focus {
            transform: translateY(-6px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.25);
            outline: none;
        }

        .product-card:focus {
            box-shadow: 0 12px 24px rgba(0,0,0,0.35);
            border-color: var(--accent-primary);
        }

        /* Strong, but subtle focus ring for keyboard users. We show ring when
           keyboard navigation is detected (html.user-is-tabbing) or when
           :focus-visible is supported by the browser. */
        html.user-is-tabbing .focus-ring:focus,
        html.user-is-tabbing .product-card:focus,
        html.user-is-tabbing .theme-toggle:focus,
        html.user-is-tabbing .buy-now:focus,
        html.user-is-tabbing .cart-btn:focus,
        .focus-ring:focus-visible,
        .product-card:focus-visible,
        .theme-toggle:focus-visible,
        .buy-now:focus-visible,
        .cart-btn:focus-visible {
            outline: 3px solid rgba(255,107,53,0.15);
            box-shadow: 0 0 0 4px rgba(255,107,53,0.12), 0 12px 24px rgba(0,0,0,0.2);
            border-radius: 8px;
        }

        /* fallback focus for browsers without :focus-visible support */
        html.user-is-tabbing .product-card:focus,
        html.user-is-tabbing .theme-toggle:focus,
        html.user-is-tabbing .buy-now:focus,
        html.user-is-tabbing .cart-btn:focus {
            outline: 2px dashed rgba(255,107,53,0.35);
            outline-offset: 3px;
        }

        /* Lightbox/modal styles for product gallery */
        .lightbox {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.9);
            z-index: 1001;
            padding: 1rem;
            overflow: hidden;
        }

        .lightbox.open { display: flex; }

        .lightbox-content {
            max-width: 90vw;
            width: 100%;
            max-height: 90vh;
            background: transparent;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 1rem;
        }

        #lightbox-main-image {
            max-width: 90vw;
            max-height: 70vh;
            width: auto;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            object-fit: contain;
        }

        .lightbox-close {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--accent-primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1002;
        }

        .lightbox-close:hover {
            background: var(--accent-primary);
            color: white;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--accent-primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1002;
        }

        .lightbox-nav:hover {
            background: var(--accent-primary);
            color: white;
        }

        .lightbox-prev { left: 20px; }
        .lightbox-next { right: 20px; }

        .lightbox-thumbnails {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 100%;
        }

        .lightbox-thumb {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
            opacity: 0.6;
            transition: all 0.2s;
        }

        .lightbox-thumb:hover {
            opacity: 1;
            border-color: var(--accent-secondary);
        }

        .lightbox-thumb.active {
            opacity: 1;
            border-color: var(--accent-primary);
        }

        /* View Gallery badge on product cards */
        .gallery-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-primary);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            pointer-events: none;
        }

        .product-card {
            position: relative;
        }

        @media (max-width: 768px) {
            .lightbox-nav {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            .lightbox-prev { left: 10px; }
            .lightbox-next { right: 10px; }
        }
    </style>
</head>

<body>
    <!-- theme toggle is placed inside the nav controls -->

    <!-- Header will be loaded dynamically from partials/header.html -->
    <div id="site-header-placeholder" aria-hidden="true"></div>

    <section id="home" class="hero">
        <h1>Hi, I'm Ryan Hackney</h1>
        <p>ECE Grad • Cybersecurity • Developer</p>
        <div style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            <a href="#shop" class="btn">Check Out My Shop</a>
            <a href="resume.pdf" class="btn" style="background: #28a745; color: white;" download>Download Resume</a>
        </div>
        <div style="margin-top: 1.5rem; display: flex; gap: 1.5rem; justify-content: center;">
            <a href="https://github.com/hackn3y" style="color: white; font-size: 1.5rem;" target="_blank">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                </svg>
            </a>
            <a href="https://www.linkedin.com/in/ryan-hackney-0b9230132/" style="color: white; font-size: 1.5rem;"
                target="_blank">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path
                        d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                </svg>
            </a>
        </div>
    </section>

    <section id="about">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            <div class="about-content">
                <img src="profile.jpg" alt="Ryan Hackney">
                <p>I'm an Electrical and Computer Engineering graduate from The Ohio State University with a Google
                    Cybersecurity Certificate, passionate about technology, security, and building things - whether it's
                    secure systems, performance cars, or a thriving farm.</p>

                <p><strong>Currently seeking opportunities in cybersecurity and software development.</strong></p>

                <p>When I'm not coding or studying security, you'll find me working on my farm raising goats, chickens,
                    and bees (that's where the honey comes from!), building high-performance cars (full bolt-on BMW 335i
                    and a Camaro project), or playing guitar with my German Shepherd by my side.</p>

                <p>I started this site to showcase my technical projects and sell products from my farm. Everything in
                    the shop is handmade and the honey is locally sourced. Check out my blog for updates on my Camaro build and tech
                    projects!</p>

                <p><strong>Education & Certifications:</strong><br>
                    B.S. Electrical and Computer Engineering - The Ohio State University<br>
                    Google Cybersecurity Professional Certificate</p>
            </div>
        </div>
    </section>

    <section id="skills">
        <div class="container">
            <h2 class="section-title">Technical Skills</h2>
            <div class="skills-grid">
                <div class="skill-card">
                    <h3>🔒 Cybersecurity</h3>
                    <ul>
                        <li>Network Security</li>
                        <li>Threat Analysis</li>
                        <li>Security Auditing</li>
                        <li>Incident Response</li>
                    </ul>
                </div>
                <div class="skill-card">
                    <h3>💻 Development</h3>
                    <ul>
                        <li>Python</li>
                        <li>JavaScript</li>
                        <li>Web Development</li>
                        <li>Linux/Unix</li>
                    </ul>
                </div>
                <div class="skill-card">
                    <h3>⚡ Engineering</h3>
                    <ul>
                        <li>Circuit Design</li>
                        <li>Embedded Systems</li>
                        <li>Signal Processing</li>
                        <li>Hardware/Software Integration</li>
                    </ul>
                </div>
                <div class="skill-card">
                    <h3>🔧 Other Skills</h3>
                    <ul>
                        <li>Automotive Performance Tuning</li>
                        <li>Agriculture & Beekeeping</li>
                        <li>Business Operations</li>
                        <li>Problem Solving</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section id="projects">
        <div class="container">
            <h2 class="section-title">Technical Projects</h2>
            <div class="projects-grid">
                <!-- Software Development -->
                <a href="project-portfolio.html" class="project-card">
                    <h3>Portfolio E-Commerce Website</h3>
                    <p>Built this full-stack website from scratch with integrated Stripe payments, Netlify serverless
                        functions, and custom domain setup. Showcases both technical and business capabilities.</p>
                    <div class="project-tags">
                        <span class="tag">HTML/CSS/JS</span>
                        <span class="tag">Stripe API</span>
                        <span class="tag">Netlify</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <!-- Cybersecurity -->
                <a href="project-security.html" class="project-card">
                    <h3>Google Cybersecurity Certificate</h3>
                    <p>Completed Google's professional Cybersecurity Certificate, gaining hands-on experience with security frameworks, network analysis, threat detection, and incident response.</p>
                    <div class="project-tags">
                        <span class="tag">Cybersecurity</span>
                        <span class="tag">Network Security</span>
                        <span class="tag">SIEM Tools</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <!-- Robotics & Computer Vision -->
                <a href="project-rubiks.html" class="project-card">
                    <h3>Rubik's Cube Solving Robot</h3>
                    <p>Autonomous robot that solves Rubik's Cubes using 3D-printed parts, servo motors, and computer vision. Demonstrates robotics, computer vision, and systems integration skills.</p>
                    <div class="project-tags">
                        <span class="tag">Robotics</span>
                        <span class="tag">Computer Vision</span>
                        <span class="tag">3D Printing</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <!-- Embedded Systems -->
                <a href="project-quadcopter.html" class="project-card">
                    <h3>FPV Racing Quadcopter</h3>
                    <p>Custom-built racing drone with DIY flight controller PCB assembly, FPV video system, telemetry, and real-time embedded programming. Features immersive cockpit-view flying experience.</p>
                    <div class="project-tags">
                        <span class="tag">Embedded Systems</span>
                        <span class="tag">PCB Assembly</span>
                        <span class="tag">FPV/Telemetry</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <a href="project-embedded.html" class="project-card">
                    <h3>Embedded Systems Project</h3>
                    <p>Hardware/software integration project from OSU showcasing microcontroller programming, circuit design, and systems engineering skills.</p>
                    <div class="project-tags">
                        <span class="tag">C/C++</span>
                        <span class="tag">Microcontrollers</span>
                        <span class="tag">Hardware</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <!-- Manufacturing & Design -->
                <a href="project-3dprinter.html" class="project-card">
                    <h3>3D Printer Assembly & CAD Design</h3>
                    <p>Built MicroMax 3D printer from kit, configured firmware and slicing software, added self-leveling, and designed custom CAD components for various projects. Printed functional upgrades and prototypes.</p>
                    <div class="project-tags">
                        <span class="tag">3D Printing</span>
                        <span class="tag">CAD Design</span>
                        <span class="tag">Manufacturing</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <!-- Signal Processing & Audio Engineering -->
                <a href="project-audio.html" class="project-card">
                    <h3>Car Audio Build - 2015 Honda Civic</h3>
                    <p>Complete audio system with sound deadening, component speakers, amplifier, DSP, and 15-inch subwoofer. Used measurement software and calibration mic for scientific DSP tuning and frequency response optimization.</p>
                    <div class="project-tags">
                        <span class="tag">Car Audio</span>
                        <span class="tag">DSP Tuning</span>
                        <span class="tag">Acoustics</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <!-- Automotive Engineering -->
                <a href="project-bmw.html" class="project-card">
                    <h3>BMW 335i Performance Build</h3>
                    <p>Full bolt-on build with custom tuning. Demonstrates hands-on technical skills, troubleshooting,
                        and systematic problem-solving in a complex mechanical/electrical system.</p>
                    <div class="project-tags">
                        <span class="tag">Automotive</span>
                        <span class="tag">Tuning</span>
                        <span class="tag">Diagnostics</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <a href="project-camaro.html" class="project-card">
                    <h3>Camaro Build Project</h3>
                    <p>Complete build and restoration of a Camaro from the ground up. Showcases fabrication, electrical systems, project management, and systematic problem-solving skills.</p>
                    <div class="project-tags">
                        <span class="tag">Restoration</span>
                        <span class="tag">Fabrication</span>
                        <span class="tag">Systems Engineering</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>

                <!-- Business & Agriculture -->
                <a href="project-farm.html" class="project-card">
                    <h3>Farm & Animals</h3>
                    <p>Operating a small farm with goats, chickens, and honeybees. Producing raw local honey, eggs, and handmade products. Demonstrates animal husbandry, beekeeping, and sustainable agriculture practices.</p>
                    <div class="project-tags">
                        <span class="tag">Agriculture</span>
                        <span class="tag">Beekeeping</span>
                        <span class="tag">Business</span>
                    </div>
                    <span class="project-link">View Details →</span>
                </a>
            </div>
        </div>
    </section>

    <section id="blog">
        <div class="container">
            <h2 class="section-title">Latest Posts</h2>
            <div class="blog-grid">
                <article class="blog-card">
                    <a href="blog-post-1.html" class="card-link">
                        <img src="camaro.jpg" alt="Building a Camaro">
                        <div class="blog-card-content">
                            <h3>Building My Dream Camaro</h3>
                            <p class="date">October 7, 2025</p>
                            <p>Follow along as I document the journey of building and restoring my Camaro from the
                                ground up...</p>
                            <span class="read-more">Read More →</span>
                        </div>
                    </a>
                </article>
            </div>
        </div>
    </section>

    <section id="shop">
        <div class="container">
            <h2 class="section-title">Shop</h2>
            <div class="products-grid" id="products-container">
            </div>
        </div>
    </section>



    <!-- Newsletter Section -->
    <section id="newsletter">
        <div class="container">
            <div class="newsletter-content">
                <h2>Stay Updated!</h2>
                <p>Get notified about new products, restocks, and Camaro build updates. Plus exclusive deals for
                    subscribers!</p>
                <form class="newsletter-form"
                    action="https://gmail.us9.list-manage.com/subscribe/post?u=a6af27b933b95a3044d8073f6&id=8939025efe&f_id=003151e1f0"
                    method="post" target="_blank">
                    <input type="email" name="EMAIL" placeholder="Enter your email" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
        </div>
    </section>



    <section id="contact">
        <div class="container">
            <h2 class="section-title">Get In Touch</h2>
            <form class="contact-form" name="contact" method="POST" action="/thank-you.html" netlify>
                <input type="hidden" name="form-name" value="contact">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" required></textarea>
                </div>
                <button type="submit" class="submit-btn">Send Message</button>
            </form>
        </div>
    </section>

    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Checkout</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div id="cart-items"></div>
            <div class="checkout-total">
                Total: $<span id="total-amount">0.00</span>
            </div>
            <form id="payment-form" class="checkout-form">
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                    You'll be redirected to Stripe's secure checkout to complete your purchase.
                </p>
                <div style="display:flex; gap:0.5rem;">
                    <button type="button" class="submit-btn" id="clear-cart">Clear Cart</button>
                    <button type="submit" class="submit-btn" id="submit-payment">Proceed to Checkout</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quick View Modal -->
    <div id="quickview-modal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2 id="quickview-title">Product Details</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="quick-view-content">
                <img id="quickview-image" class="quick-view-image" src="" alt="">
                <div class="quick-view-info">
                    <p id="quickview-description"></p>
                    <div class="quick-view-price" id="quickview-price"></div>
                    <button class="buy-now" id="quickview-add" style="max-width: 300px;" data-buy-quickview="1">
                        Add to Cart
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Gallery Lightbox -->
    <div id="product-lightbox" class="lightbox" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="lightbox-content">
            <button class="lightbox-close" aria-label="Close gallery">✕</button>
            <button class="lightbox-nav lightbox-prev" aria-label="Previous image">‹</button>
            <button class="lightbox-nav lightbox-next" aria-label="Next image">›</button>
            <img id="lightbox-main-image" src="" alt="">
            <div class="lightbox-thumbnails" id="lightbox-thumbnails"></div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Ryan Hackney. All rights reserved.</p>
        <div class="social-links">
            <a href="https://www.instagram.com/rhackn3y/">Instagram</a>
            <a href="https://x.com/Hackn3y">Twitter</a>
            <a href="https://www.linkedin.com/in/ryan-hackney-0b9230132/">LinkedIn</a>
        </div>
    </footer>

    <script src="js/header.js"></script>
    <script src="js/theme.js"></script>
    <script>
        const STRIPE_PUBLISHABLE_KEY = 'pk_live_51SFT2r4298bLnbuDbmaU4GzHAKPcs6gv6wwK0vh7xxjfpvapSzDgpn4tw7Fs9M0UhIv0gaBKOWInlhnswNmcb4xc00WNYF26Ld';
        const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);

        const products = [
            {
                id: 'prod_1',
                name: 'Soy Candles',
                price: 25.00,
                description: 'Hand-poured soy candle with scents from Black Tie Barn, 304g',
                image: 'candle.jpg',
                images: ['candle.jpg', 'candle2.jpg']
            },
            {
                id: 'prod_2',
                name: 'Pure Raw Local Honey - 1.5lb',
                price: 15.00,
                description: 'Pure raw local honey in a pint mason jar, 1.5lb',
                image: 'honeysmall.jpg'
            },
            {
                id: 'prod_3',
                name: 'Pure Raw Local Honey - 3lb',
                price: 25.00,
                description: 'Pure raw local honey in a quart mason jar, 3lb',
                image: 'honeybig.jpg'
            },
            {
                id: 'prod_4',
                name: 'Handmade Soap',
                price: 7.00,
                description: 'Handmade with beef tallow, coconut, olive, avocado, castor oils and scents from Black Tie Barn',
                image: 'soap.jpg',
                images: ['soap.jpg', 'soap2.jpg', 'soap3.jpg', 'soap4.jpg', 'soap5.jpg']
            }
        ];

        let cart = [];

        // theme logic moved to js/theme.js

        function loadProducts() {
            const container = document.getElementById('products-container');
            container.innerHTML = products.map(product => {
                const hasGallery = product.images && product.images.length > 1;
                const galleryBadge = hasGallery ? `<span class="gallery-badge">📷 ${product.images.length} photos</span>` : '';
                const galleryButton = hasGallery ? `<button class="buy-now" data-view-gallery="${product.id}" style="background: #6c757d;">View Gallery</button>` : '';

                return `
        <div class="product-card" data-product-id="${product.id}" tabindex="0" role="button">
            ${galleryBadge}
            <img src="${product.image}" alt="${product.name}">
            <div class="product-info">
                <h3>${product.name}</h3>
                <p>${product.description}</p>
                <div class="price">$${product.price.toFixed(2)}</div>
                <div style="display:flex; gap:0.5rem; margin-top:0.75rem;">
                    ${galleryButton}
                    <button class="buy-now" data-add-to-cart="${product.id}">Add to Cart</button>
                </div>
            </div>
        </div>
    `;
            }).join('');
        }

        // helper used by Add to Cart buttons rendered in the product grid (takes explicit button)
        function addToCartFromCard(e, productId) {
            e.stopPropagation();
            const btn = e.currentTarget;
            addToCartById(btn, productId);
        }

        function addToCartById(btn, productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            cart.push(product);
            updateCartCount();
            if (btn) {
                const originalText = btn.textContent;
                btn.textContent = 'Added!';
                btn.style.background = '#28a745';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 900);
            }
            // persist cart to localStorage
            try { localStorage.setItem('cart', JSON.stringify(cart.map(i => i.id))); } catch (e) { /* ignore */ }
        }

        function addToCart(productId, btn) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            cart.push(product);
            updateCartCount();

            if (btn) {
                const originalText = btn.textContent;
                btn.textContent = 'Added!';
                btn.style.background = '#28a745';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 1000);
            }
        }

        function updateCartCount() {
            // visible badge (id="cart-count") and SR-only count (id="cart-count-sr")
            const badge = document.getElementById('cart-count');
            const sr = document.getElementById('cart-count-sr');
            if (badge) {
                badge.textContent = cart.length;
                badge.style.display = cart.length > 0 ? 'inline-flex' : 'none';
            }
            if (sr) {
                // announce friendly text for screen readers
                const itemText = cart.length === 1 ? '1 item' : `${cart.length} items`;
                sr.textContent = `${itemText} in cart`;
            }
        }

        function openCheckout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }

            const modal = document.getElementById('checkout-modal');
            const cartItems = document.getElementById('cart-items');
            const total = cart.reduce((sum, item) => sum + item.price, 0);

            cartItems.innerHTML = cart.map(item => `
                <div class="checkout-item">
                    <span>${item.name}</span>
                    <span>$${item.price.toFixed(2)}</span>
                </div>
            `).join('');

            document.getElementById('total-amount').textContent = total.toFixed(2);
            modal.classList.add('active');
        }

        function closeCheckout() {
            document.getElementById('checkout-modal').classList.remove('active');
        }

        function clearCart() {
            cart = [];
            try { localStorage.removeItem('cart'); } catch (e) { /* ignore */ }
            updateCartCount();
            const cartItems = document.getElementById('cart-items');
            if (cartItems) cartItems.innerHTML = '';
            document.getElementById('total-amount').textContent = '0.00';
            closeCheckout();
        }

        let currentQuickViewProduct = null;

        function openQuickView(productId) {
            const product = products.find(p => p.id === productId);
            currentQuickViewProduct = product;

            document.getElementById('quickview-title').textContent = product.name;
            document.getElementById('quickview-image').src = product.image;
            document.getElementById('quickview-description').textContent = product.description;
            document.getElementById('quickview-price').textContent = `$${product.price.toFixed(2)}`;

            document.getElementById('quickview-modal').classList.add('active');
        }

        function closeQuickView() {
            document.getElementById('quickview-modal').classList.remove('active');
        }

        function addToCartFromQuickView() {
            if (currentQuickViewProduct) {
                cart.push(currentQuickViewProduct);
                updateCartCount();
                closeQuickView();
                alert(`${currentQuickViewProduct.name} added to cart!`);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');

            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                themeIcon.textContent = '☀️';
                themeText.textContent = 'Light Mode';
            }

            // If a blog page requested the cart to open, handle it and clear the flag
            try {
                if (localStorage.getItem('openCart') === '1') {
                    localStorage.removeItem('openCart');
                    // small timeout to allow DOM to settle
                    setTimeout(() => {
                        openCheckout();
                    }, 200);
                }
            } catch (e) { /* ignore */ }

            loadProducts();

            // ensure cart badge is initialized
            updateCartCount();

            // load persisted cart from localStorage (ids) and rebuild cart array
            try {
                const raw = localStorage.getItem('cart');
                if (raw) {
                    const ids = JSON.parse(raw);
                    if (Array.isArray(ids)) {
                        cart = ids.map(id => products.find(p => p.id === id)).filter(Boolean);
                        updateCartCount();
                    }
                }
            } catch (e) { /* ignore */ }

            // Product Gallery Lightbox setup - must be before event delegation
            const lightbox = document.getElementById('product-lightbox');
            const lightboxImage = document.getElementById('lightbox-main-image');
            const lightboxThumbnails = document.getElementById('lightbox-thumbnails');
            const lightboxCloseBtn = lightbox ? lightbox.querySelector('.lightbox-close') : null;
            const lightboxPrevBtn = lightbox ? lightbox.querySelector('.lightbox-prev') : null;
            const lightboxNextBtn = lightbox ? lightbox.querySelector('.lightbox-next') : null;

            let currentGalleryImages = [];
            let currentImageIndex = 0;
            let lightboxLastFocused = null;

            function openLightbox(productId, startIndex = 0) {
                const product = products.find(p => p.id === productId);
                if (!product || !product.images) return;

                currentGalleryImages = product.images;
                currentImageIndex = startIndex;
                lightboxLastFocused = document.activeElement;

                updateLightboxImage();
                updateThumbnails();

                lightbox.classList.add('open');
                lightbox.setAttribute('aria-hidden', 'false');
                lightboxCloseBtn.focus();
                document.body.style.overflow = 'hidden';
            }

            function closeLightbox() {
                lightbox.classList.remove('open');
                lightbox.setAttribute('aria-hidden', 'true');
                document.body.style.overflow = '';
                if (lightboxLastFocused) lightboxLastFocused.focus();
            }

            function updateLightboxImage() {
                if (currentGalleryImages.length === 0) return;
                lightboxImage.src = currentGalleryImages[currentImageIndex];
                lightboxImage.alt = `Image ${currentImageIndex + 1} of ${currentGalleryImages.length}`;

                // Update active thumbnail
                document.querySelectorAll('.lightbox-thumb').forEach((thumb, idx) => {
                    thumb.classList.toggle('active', idx === currentImageIndex);
                });

                // Hide/show nav buttons if only one image
                if (currentGalleryImages.length <= 1) {
                    if (lightboxPrevBtn) lightboxPrevBtn.style.display = 'none';
                    if (lightboxNextBtn) lightboxNextBtn.style.display = 'none';
                } else {
                    if (lightboxPrevBtn) lightboxPrevBtn.style.display = 'flex';
                    if (lightboxNextBtn) lightboxNextBtn.style.display = 'flex';
                }
            }

            function updateThumbnails() {
                lightboxThumbnails.innerHTML = currentGalleryImages.map((img, idx) =>
                    `<img src="${img}" class="lightbox-thumb ${idx === currentImageIndex ? 'active' : ''}"
                          data-index="${idx}" alt="Thumbnail ${idx + 1}">`
                ).join('');

                // Add click handlers to thumbnails
                lightboxThumbnails.querySelectorAll('.lightbox-thumb').forEach(thumb => {
                    thumb.addEventListener('click', () => {
                        currentImageIndex = parseInt(thumb.getAttribute('data-index'));
                        updateLightboxImage();
                    });
                });
            }

            function nextImage() {
                currentImageIndex = (currentImageIndex + 1) % currentGalleryImages.length;
                updateLightboxImage();
            }

            function prevImage() {
                currentImageIndex = (currentImageIndex - 1 + currentGalleryImages.length) % currentGalleryImages.length;
                updateLightboxImage();
            }

            // Lightbox event listeners
            if (lightboxCloseBtn) lightboxCloseBtn.addEventListener('click', closeLightbox);
            if (lightboxPrevBtn) lightboxPrevBtn.addEventListener('click', prevImage);
            if (lightboxNextBtn) lightboxNextBtn.addEventListener('click', nextImage);

            // Close on backdrop click
            if (lightbox) {
                lightbox.addEventListener('click', (e) => {
                    if (e.target === lightbox) closeLightbox();
                });
            }

            // Keyboard navigation for lightbox
            document.addEventListener('keydown', (e) => {
                if (!lightbox || !lightbox.classList.contains('open')) return;

                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowRight') {
                    nextImage();
                } else if (e.key === 'ArrowLeft') {
                    prevImage();
                }
            });

            // Mousewheel navigation for lightbox
            if (lightbox) {
                lightbox.addEventListener('wheel', (e) => {
                    if (!lightbox.classList.contains('open')) return;
                    e.preventDefault();

                    if (e.deltaY > 0) {
                        // Scrolling down = next image
                        nextImage();
                    } else if (e.deltaY < 0) {
                        // Scrolling up = previous image
                        prevImage();
                    }
                }, { passive: false });
            }

            // Event delegation for product grid (replace inline handlers)
            const productsContainer = document.getElementById('products-container');
            if (productsContainer) {
                productsContainer.addEventListener('click', (e) => {
                    // Check for View Gallery button first
                    const galleryBtn = e.target.closest('[data-view-gallery]');
                    if (galleryBtn) {
                        e.stopPropagation();
                        const productId = galleryBtn.getAttribute('data-view-gallery');
                        openLightbox(productId, 0);
                        return;
                    }

                    const addBtn = e.target.closest('[data-add-to-cart]');
                    if (addBtn) {
                        e.stopPropagation();
                        const id = addBtn.getAttribute('data-add-to-cart');
                        addToCartById(addBtn, id);
                        return;
                    }

                    const card = e.target.closest('.product-card');
                    if (card) {
                        const id = card.getAttribute('data-product-id');
                        openQuickView(id);
                    }
                });

                // keyboard activation: Enter/Space on focused card
                productsContainer.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        const card = e.target.closest('.product-card');
                        if (card) {
                            e.preventDefault();
                            const id = card.getAttribute('data-product-id');
                            openQuickView(id);
                        }
                    }
                });
            }

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    if (this.id === 'cart-link') return;
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });

            const paymentForm = document.getElementById('payment-form');
            if (paymentForm) {
                paymentForm.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const submitButton = document.getElementById('submit-payment');
                    submitButton.disabled = true;
                    submitButton.textContent = 'Processing...';

                    try {
                        const response = await fetch('/.netlify/functions/create-checkout', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ items: cart })
                        });

                        const data = await response.json();

                        if (response.ok) {
                            window.location.href = data.url;
                        } else {
                            throw new Error(data.error || 'Failed to create checkout session');
                        }
                    } catch (err) {
                        console.error('Error:', err);
                        alert('Failed to start checkout: ' + err.message);
                        submitButton.disabled = false;
                        submitButton.textContent = 'Proceed to Checkout';
                    }
                });
            }
        });
    </script>
</body>

</html>